{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TODES\\\\Desktop\\\\Programacion\\\\Ecomerce\\\\front\\\\src\\\\components\\\\client\\\\registerForms\\\\CreateUser.jsx\",\n  _s = $RefreshSig$();\nimport { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { db } from \"../../db/firebase\";\nimport { doc, setDoc, collection, query, where, getDocs } from \"firebase/firestore\";\nimport { useForm } from \"react-hook-form\";\nimport { LoggedContext } from \"../../../context/loggedContext\";\nimport { NavbarClient } from \"../NavbarClient\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CreateUser = () => {\n  _s();\n  const {\n    setLogged\n  } = useContext(LoggedContext);\n  const {\n    register,\n    handleSubmit,\n    reset,\n    formState: {\n      errors\n    }\n  } = useForm({\n    reValidateMode: \"onSubmit\"\n  });\n  const userExist = async data => {\n    try {\n      const usersCollection = await collection(db, \"users\");\n      const filter = await query(usersCollection, where(\"user\", \"==\", data.user), where(\"email\", \"==\", data.email));\n      const request = await getDocs(filter);\n      return request.docs.length;\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  const sendData = async data => {\n    if (data.password === data.repeatedPassword) {\n      //envia la info y crea el obj\n      try {\n        await setDoc(doc(db, \"users\", data.user), {\n          ...data,\n          products: [],\n          orders: []\n        });\n        toast.success(\"Se creó su usuario con éxito\");\n        setLogged(logged => !logged);\n        reset();\n      } catch (err) {\n        console.error(err);\n      }\n    } else {\n      toast.error(\"Las contraseñas no coinciden\");\n    }\n  };\n  const createUserManager = async data => {\n    const info = await userExist(data);\n    if (info === 0) {\n      await sendData(data);\n    } else {\n      toast.error(\"ese usuario ya existe\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(NavbarClient, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Crea tu usuario en La tiendita!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(createUserManager),\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ...register(\"email\", {\n          required: true\n        }),\n        placeholder: \"Escribe tu mail\",\n        type: \"email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), (errors === null || errors === void 0 ? void 0 : errors.email) && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Este campo es requerido\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ...register(\"user\", {\n          required: true\n        }),\n        placeholder: \"Crea tu usuario\",\n        type: \"text\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), (errors === null || errors === void 0 ? void 0 : errors.user) && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Este campo es requerido\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 26\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ...register(\"password\", {\n          required: true,\n          minLength: 6\n        }),\n        placeholder: \"Crea tu contrase\\xF1a\",\n        type: \"password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), (errors === null || errors === void 0 ? void 0 : errors.password) && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Este campo es requerido\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 30\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ...register(\"repeatedPassword\", {\n          required: true,\n          minLength: 6\n        }),\n        placeholder: \"Repite tu contrase\\xF1a\",\n        type: \"password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), (errors === null || errors === void 0 ? void 0 : errors.repeatedPassword) && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Este campo es requerido\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 38\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Registrarme\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\xBFYa ten\\xE9s una cuenta? \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/client/login\",\n          children: \"Ingresa!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      theme: \"colored\",\n      draggablePercent: 80\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(CreateUser, \"UKU7c+AF6SWdVoiQW27HFLFJogM=\", false, function () {\n  return [useForm];\n});\n_c = CreateUser;\nvar _c;\n$RefreshReg$(_c, \"CreateUser\");","map":{"version":3,"names":["useContext","Link","toast","ToastContainer","db","doc","setDoc","collection","query","where","getDocs","useForm","LoggedContext","NavbarClient","CreateUser","setLogged","register","handleSubmit","reset","formState","errors","reValidateMode","userExist","data","usersCollection","filter","user","email","request","docs","length","err","console","log","sendData","password","repeatedPassword","products","orders","success","logged","error","createUserManager","info","required","minLength"],"sources":["C:/Users/TODES/Desktop/Programacion/Ecomerce/front/src/components/client/registerForms/CreateUser.jsx"],"sourcesContent":["import { useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { db } from \"../../db/firebase\";\r\nimport {\r\n  doc,\r\n  setDoc,\r\n  collection,\r\n  query,\r\n  where,\r\n  getDocs,\r\n} from \"firebase/firestore\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { LoggedContext } from \"../../../context/loggedContext\";\r\nimport { NavbarClient } from \"../NavbarClient\"\r\n\r\nexport const CreateUser = () => {\r\n  const { setLogged } = useContext(LoggedContext);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    reset,\r\n    formState: { errors },\r\n  } = useForm({ reValidateMode: \"onSubmit\" });\r\n\r\n    const userExist = async (data) => {\r\n      try{\r\n        const usersCollection = await collection(db, \"users\");\r\n        const filter = await query(\r\n          usersCollection,\r\n          where(\"user\", \"==\", data.user),\r\n          where(\"email\", \"==\", data.email)\r\n        );\r\n        const request = await getDocs(filter);\r\n        return request.docs.length\r\n      }\r\n      catch(err){\r\n        console.log(err)\r\n      }\r\n  };\r\n\r\n  const sendData = async (data) => {\r\n    if (data.password === data.repeatedPassword) {\r\n      //envia la info y crea el obj\r\n      try{\r\n        await setDoc(doc(db, \"users\", data.user), {\r\n          ...data,\r\n          products: [],\r\n          orders: [],\r\n        });\r\n        toast.success(\"Se creó su usuario con éxito\")\r\n        setLogged((logged) => !logged)\r\n        reset()\r\n      }\r\n      catch(err){\r\n        console.error(err)\r\n      }\r\n    } else {\r\n      toast.error(\"Las contraseñas no coinciden\")\r\n    }\r\n  };\r\n\r\n  const createUserManager = async (data) => {\r\n    const info = await userExist(data)\r\n    if (info === 0){\r\n      await sendData(data)\r\n    } else {\r\n      toast.error(\"ese usuario ya existe\")\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <NavbarClient />\r\n      <div>\r\n        <h1>Crea tu usuario en La tiendita!</h1>\r\n      </div>\r\n      <form onSubmit={handleSubmit(createUserManager)}>\r\n        <input\r\n          {...register(\"email\", { required: true })}\r\n          placeholder=\"Escribe tu mail\"\r\n          type=\"email\"\r\n        />\r\n        {errors?.email && <p>Este campo es requerido</p>}\r\n        <input\r\n          {...register(\"user\", { required: true })}\r\n          placeholder=\"Crea tu usuario\"\r\n          type=\"text\"\r\n        />\r\n        {errors?.user && <p>Este campo es requerido</p>}\r\n        <input\r\n          {...register(\"password\", { required: true, minLength: 6 })}\r\n          placeholder=\"Crea tu contraseña\"\r\n          type=\"password\"\r\n        />\r\n        {errors?.password && <p>Este campo es requerido</p>}\r\n        <input\r\n          {...register(\"repeatedPassword\", { required: true, minLength: 6 })}\r\n          placeholder=\"Repite tu contraseña\"\r\n          type=\"password\"\r\n        />\r\n        {errors?.repeatedPassword && <p>Este campo es requerido</p>}\r\n        <button type=\"submit\">Registrarme</button>\r\n      </form>\r\n      <div>\r\n        <p>\r\n          ¿Ya tenés una cuenta? <Link to={\"/client/login\"}>Ingresa!</Link>\r\n        </p>\r\n      </div>\r\n      <ToastContainer theme=\"colored\" draggablePercent={80} />\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}